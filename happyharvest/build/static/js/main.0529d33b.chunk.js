(this.webpackJsonphappyharvest=this.webpackJsonphappyharvest||[]).push([[0],{25:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),a=n(19),i=n.n(a),o=(n(25),n(7)),c=n(8),p=n(11),l=n(10),u=n(12),d=n(6),h=n(9),j="signIn:updateSignInForm",g="signIn:resetSignInForm",b="signIn:updateSignInMessage";function m(e){return{type:j,payload:{name:e.target.name,value:e.target.value}}}function v(){return{type:g,payload:{}}}function O(e){return{type:b,payload:{msg:e}}}var f=n(22),x="currentUser:setUser",U="currentUser:logOut";function y(e){return{type:x,payload:{username:e.username?e.username:"",fullname:e.fullname?e.fullname:"",email:e.email?e.email:"",registration:e.registration?e.registration:0,farmElements:{cropSpaces:e.farmElements.cropSpaces?e.farmElements.cropSpaces:0,animalSpaces:e.farmElements.animalSpaces?e.farmElements.animalSpaces:0,currentCrops:e.farmElements.currentCrops?Object(f.a)(e.farmElements.currentCrops):[],currentAnimals:e.farmElements.currentAnimals?Object(f.a)(e.farmElements.currentAnimals):[]},inventory:{currentCash:e.inventory.currentCash?e.inventory.currentCash:0,cropBoost:e.inventory.cropBoost?e.inventory.cropBoost:0,animalBoost:e.inventory.animalBoost?e.inventory.animalBoost:0,products:e.inventory.products?Object(f.a)(e.inventory.products):[]}}}}function S(){return{type:U,payload:{}}}var C=n(37),w="auth:setToken";function k(e){return{type:w,payload:{authToken:e}}}var E=n(1),I=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handleChange=r.handleChange.bind(Object(u.a)(r)),r.handleClick=r.handleClick.bind(Object(u.a)(r)),r.handleKeyPress=r.handleKeyPress.bind(Object(u.a)(r)),r}return Object(c.a)(n,[{key:"handleKeyPress",value:function(e){"Enter"===e.key&&this.handleClick()}},{key:"handleChange",value:function(e){this.props.onUpdateSignInForm(e)}},{key:"handleClick",value:function(){var e=this,t=this.props.cookies,n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:this.props.signIn.username?String(this.props.signIn.username):"-",password:this.props.signIn.password?String(this.props.signIn.password):"-"})};fetch("http://10.6.130.90/users/auth",n).then((function(e){return e.json()})).then((function(n){"true"===n.status?(e.props.onUpdateSignInMessage(""),e.props.onSetUser(n),n.authToken&&(t.set("authToken",n.authToken,{path:"/"}),t.set("authUser",n.username,{path:"/"}),e.props.onSetToken(t.get("authToken")))):e.props.onUpdateSignInMessage(n.msg)})).catch((function(e){alert(e)}))}},{key:"render",value:function(){return Object(E.jsxs)("form",{className:"Login",children:[Object(E.jsx)("h2",{children:"Introduzca sus datos:"}),Object(E.jsx)("input",{type:"text",placeholder:"Usuario",name:"username",onChange:this.handleChange}),Object(E.jsx)("input",{type:"password",placeholder:"Contrase\xf1a",name:"password",onChange:this.handleChange,onKeyPress:this.handleKeyPress}),Object(E.jsx)("button",{type:"button",onClick:this.handleClick,children:"Enviar"}),Object(E.jsx)("br",{}),Object(E.jsx)("p",{children:this.props.signIn.msg})]})}}]),n}(s.a.Component),T=Object(C.a)(Object(h.b)((function(e,t){return{currentUser:e.currentUser,signIn:e.signIn,auth:e.auth}}),(function(e,t){return Object(d.a)({onUpdateSignInForm:m,onResetSignInForm:v,onUpdateSignInMessage:O,onSetUser:y,onLogOut:S,onSetToken:k},e)}))(I)),P=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"render",value:function(){if(console.log(this.props.elementInfo),this.props.elementInfo){var e=new Date(this.props.elementInfo.lastProduction),t=new Date(this.props.elementInfo.lastProduction+36e5*this.props.elementInfo.cycleTime);return Object(E.jsxs)("div",{children:[Object(E.jsxs)("p",{children:["Nombre: ",this.props.elementInfo.type,", id: ",this.props.id]}),Object(E.jsxs)("p",{children:["Fecha de cultivo: ",String(e.getDate())+"/"+String(e.getMonth()+1)+"/"+String(e.getFullYear())+" "+String(e.getHours())+":"+String(e.getMinutes())]}),Object(E.jsxs)("p",{children:["Fecha de recogida: ",String(t.getDate())+"/"+String(t.getMonth()+1)+"/"+String(t.getFullYear())+" "+String(t.getHours())+":"+String(t.getMinutes())]}),Object(E.jsx)("img",{src:this.props.elementInfo.icon,alt:"",style:{width:"64px",height:"64px"}})]})}return Object(E.jsx)("div",{children:Object(E.jsx)("h1",{children:"Espacio disponible para cultivos"})})}}]),n}(s.a.Component);var M=function(e){return Object(E.jsx)("div",{style:{minHeight:"800px",marginTop:"5%",marginBottom:"5%",marginLeft:"20%",marginRight:"20%",width:"60%",backgroundColor:"white",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"},children:e.children})},F=n(2);var B=function(e){return""===e.props.username?Object(E.jsx)("div",{children:Object(E.jsxs)(M,{children:[Object(E.jsx)("br",{}),Object(E.jsx)(T,{})]})}):Object(E.jsx)(F.a,{to:"/"})},L=n(4),R="signUp:updateSignUpForm",A="signUp:resetSignUpForm",H="signUp:updateSignUpMessage";function _(e){return{type:R,payload:{name:e.target.name,value:e.target.value}}}function D(){return{type:A,payload:{}}}function N(e){return{type:H,payload:{validUser:e.validUser,validPassword:e.validPassword,validEmail:e.validEmail}}}var z=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).handleChange=e.handleChange.bind(Object(u.a)(e)),e.handleClick=e.handleClick.bind(Object(u.a)(e)),e}return Object(c.a)(n,[{key:"handleChange",value:function(e){this.props.onUpdateSignUpForm(e)}},{key:"handleClick",value:function(){var e=this;this.props.onUpdateSignUpMessage({validUser:"",validPassword:"",validEmail:""});var t=!0,n=/[^a-z0-9]/i;if(this.props.signUp.username.length<=5&&(this.props.onUpdateSignUpMessage({validUser:"El nombre de usuario debe contener al menos 6 caracteres"}),t=!1),n.test(this.props.signUp.username)&&(this.props.onUpdateSignUpMessage({validUser:"El nombre de usuario no debe contener caracteres especiales"}),t=!1),this.props.signUp.password.length<=5&&(this.props.onUpdateSignUpMessage({validPassword:"La contrase\xf1a debe contener al menos 6 caracteres"}),t=!1),n.test(this.props.signUp.password)&&(this.props.onUpdateSignUpMessage({validPassword:"La contrase\xf1a no debe contener caracteres especiales"}),t=!1),this.props.signUp.password!==this.props.signUp.passwordRepeat&&(this.props.onUpdateSignUpMessage({validPassword:"La contrase\xf1a no coincide"}),t=!1),/^([a-z]|[0-9])+@([a-z]|[0-9])+(\.([a-z][a-z])+)+/i.test(this.props.signUp.email)||(this.props.onUpdateSignUpMessage({validEmail:"Introduzca un correo con formato v\xe1lido: examplemail@example.com"}),t=!1),t){var r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:this.props.signUp.username?String(this.props.signUp.username):"-",password:this.props.signUp.password?String(this.props.signUp.password):"-",email:this.props.signUp.email?String(this.props.signUp.email):"-"})};fetch("http://10.6.130.90/users",r).then((function(e){return e.json()})).then((function(t){console.log(t),"res"===t.type?(e.props.onUpdateSignUpForm({target:{name:"register",value:"true"===t.register}}),e.props.onUpdateSignUpMessage({validUser:t.validUser?t.validUser:"",validPassword:t.validPassword?t.validPassword:"",validEmail:t.validEmail?t.validEmail:""})):alert(t.msg)})).catch((function(e){alert(e)}))}}},{key:"render",value:function(){var e={color:"red"},t=Object(E.jsxs)("div",{children:[Object(E.jsx)("h1",{children:"Registro"}),Object(E.jsxs)("form",{className:"Login",children:[Object(E.jsx)("h2",{children:"Introduzca sus datos:"}),Object(E.jsx)("input",{type:"text",placeholder:"Usuario",name:"username",onChange:this.handleChange}),Object(E.jsx)("p",{style:e,children:this.props.signUp.validUser}),Object(E.jsx)("input",{type:"text",placeholder:"Correo electr\xf3nico",name:"email",onChange:this.handleChange}),Object(E.jsx)("p",{style:e,children:this.props.signUp.validEmail}),Object(E.jsx)("input",{type:"password",placeholder:"Contrase\xf1a",name:"password",onChange:this.handleChange}),Object(E.jsx)("input",{type:"password",placeholder:"Repetir contrase\xf1a",name:"passwordRepeat",onChange:this.handleChange}),Object(E.jsx)("p",{style:e,children:this.props.signUp.validPassword}),Object(E.jsx)("button",{type:"button",onClick:this.handleClick,children:"Registrarme"}),Object(E.jsx)("br",{}),Object(E.jsx)("p",{children:this.props.signUp.msg})]})]}),n=Object(E.jsxs)("div",{children:[Object(E.jsx)("h1",{children:"Usted ha sido registrado satisfactoriamente"}),Object(E.jsx)(L.b,{to:"/signin",children:Object(E.jsx)("button",{children:"Iniciar sesi\xf3n"})})]});return this.props.signUp.register?n:t}}]),n}(s.a.Component),K=Object(h.b)((function(e,t){return{signUp:e.signUp}}),(function(e,t){return Object(d.a)({onUpdateSignUpForm:_,onResetSignUpForm:D,onUpdateSignUpMessage:N},e)}))(z);var J=function(e){return""===e.props.username?Object(E.jsx)("div",{children:Object(E.jsx)(M,{children:Object(E.jsx)(K,{})})}):Object(E.jsx)(F.a,{to:"/"})},X=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handleClick=r.handleClick.bind(Object(u.a)(r)),r}return Object(c.a)(n,[{key:"handleClick",value:function(){var e=this.props.cookies;this.props.onLogOut(),this.props.onSetToken(""),e.set("authToken",void 0,{path:"/"}),e.set("authUser",void 0,{path:"/"})}},{key:"render",value:function(){var e={height:"10%",width:"100%",backgroundColor:"green",color:"white"},t=Object(E.jsxs)("nav",{style:e,children:[Object(E.jsx)("h1",{style:{margin:"0px"},children:"Welcome to HappyHarvest!"}),Object(E.jsx)(L.b,{to:"/",children:Object(E.jsx)("button",{children:"Home"})}),Object(E.jsx)(L.b,{to:"/signin",children:Object(E.jsx)("button",{children:"Login"})}),Object(E.jsx)(L.b,{to:"/signup",children:Object(E.jsx)("button",{children:"Registrarse"})})]}),n=Object(E.jsxs)("nav",{style:e,children:[Object(E.jsx)("h1",{style:{margin:"0px"},children:"Welcome to HappyHarvest!"}),Object(E.jsx)(L.b,{to:"/",children:Object(E.jsx)("button",{children:"Home"})}),Object(E.jsx)("button",{type:"button",onClick:this.handleClick,children:"Cerrar sesi\xf3n"})]});return""===this.props.currentUser.username?t:n}}]),n}(s.a.Component),V=Object(C.a)(Object(h.b)((function(e,t){return{currentUser:e.currentUser,auth:e.auth}}),(function(e,t){return Object(d.a)({onLogOut:S,onSetToken:k},e)}))(X));var W=function(){return Object(E.jsxs)("footer",{style:{position:"absolute",width:"100%",backgroundColor:"green",color:"white",display:"inline"},children:[Object(E.jsx)("p",{children:"Acerca de:"}),Object(E.jsx)("p",{children:"Alu0101..."}),Object(E.jsx)("p",{children:"Alu0101..."})]})};var Y=function(e){return""===e.props.username?Object(E.jsxs)(M,{children:[Object(E.jsx)("br",{}),Object(E.jsxs)("div",{className:"Welcome",children:[Object(E.jsx)("h1",{children:" \xa1Bienvenido a HappyHarvest! "}),Object(E.jsx)("p",{children:"Actualmente no se encuentra registrado, por favor, cree una cuenta. En caso de tener una cuenta inicie sesi\xf3n."}),Object(E.jsx)(L.b,{to:"/signin",children:Object(E.jsx)("button",{children:"Login"})}),Object(E.jsx)(L.b,{to:"/signup",children:Object(E.jsx)("button",{children:"Registro"})})]})]}):Object(E.jsx)("div",{children:Object(E.jsxs)(M,{children:[Object(E.jsx)("h1",{children:"Happy Harvest"}),Object(E.jsx)(L.b,{to:"/Crops",children:Object(E.jsx)("button",{children:"Mis cultivos"})})]})})},G=n(13),q=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"render",value:function(){if(""===this.props.currentUser.username)return Object(E.jsx)(F.a,{to:"/"});for(var e=[],t=0;t<this.props.currentUser.farmElements.cropSpaces;t++)this.props.currentUser.farmElements.currentCrops[t]?e.push(Object(E.jsx)(P,{elementInfo:Object(G.a)({},this.props.currentUser.farmElements.currentCrops[t]),id:String(t)},String(t))):e.push(Object(E.jsx)(P,{},String(t)));return console.log(e),Object(E.jsx)("div",{children:Object(E.jsxs)(M,{children:[Object(E.jsx)(L.b,{to:"/",children:Object(E.jsx)("button",{children:"Volver"})}),e]})})}}]),n}(s.a.Component),Q=Object(h.b)((function(e,t){return{currentUser:e.currentUser}}),(function(e,t){return Object(d.a)({},e)}))(q),Z=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.cookies,n=t.get("authToken"),r=t.get("authUser");if(n&&r){var s={method:"GET",headers:{Authorization:"Bearer ".concat(n)}};fetch("http://10.6.130.90/users/".concat(r),s).then((function(e){return e.json()})).then((function(n){"res"===n.type?(e.props.onSetUser(n),e.props.onSetToken(t.get("authToken"))):(t.set("authToken",void 0,{path:"/"}),t.set("authUser",void 0,{path:"/"}))})).catch((function(e){alert(e)}))}else t.set("authToken",void 0,{path:"/"}),t.set("authUser",void 0,{path:"/"})}},{key:"render",value:function(){return Object(E.jsxs)(L.a,{children:[Object(E.jsx)(V,{}),Object(E.jsxs)(F.d,{children:[Object(E.jsx)(F.b,{exact:!0,path:"/",element:Object(E.jsx)(Y,{props:{username:this.props.currentUser.username}})}),Object(E.jsx)(F.b,{path:"/signin",element:Object(E.jsx)(B,{props:{username:this.props.currentUser.username}})}),Object(E.jsx)(F.b,{path:"/signup",element:Object(E.jsx)(J,{props:{username:this.props.currentUser.username}})}),Object(E.jsx)(F.b,{path:"/Crops",element:Object(E.jsx)(Q,{})})]}),Object(E.jsx)(W,{})]})}}]),n}(s.a.Component),$=Object(C.a)(Object(h.b)((function(e,t){return{auth:e.auth,currentUser:e.currentUser}}),(function(e,t){return Object(d.a)({onSetToken:k,onSetUser:y},e)}))(Z)),ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),s(e),a(e),i(e)}))};var te=n(38);var ne=Object(d.b)({currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:"",fullname:"",email:"",registration:0,farmElements:{cropSpaces:0,animalSpaces:0,currentCrops:[],currentAnimals:[]},inventory:{currentCash:0,cropBoost:0,animalBoost:0,products:[]}},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case x:return r;case U:return{username:"",fullname:"",email:"",registration:0,farmElements:{cropSpaces:0,animalSpaces:0,currentCrops:[],currentAnimals:[]},inventory:{currentCash:0,cropBoost:0,animalBoost:0,products:[]}};default:return e}},signIn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:"",password:"",msg:""},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload,s={};switch(n){case j:return void 0!=(s=Object(G.a)({},e))[r.name]&&(s[r.name]=r.value),s;case g:return{username:"",password:"",msg:""};case b:return(s=Object(G.a)({},e)).msg=r.msg,s;default:return e}},signUp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:"",password:"",email:"",passwordRepeat:"",register:!1,validUser:"",validPassword:"",validEmail:""},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload,s={};switch(n){case R:return void 0!=(s=Object(G.a)({},e))[r.name]&&(s[r.name]=r.value),s;case A:return{username:"",password:"",email:"",passwordRepeat:"",register:!1,validUser:"",validPassword:"",validEmail:""};case H:return(s=Object(G.a)({},e)).validUser=void 0===r.validUser?s.validUser:r.validUser,s.validPassword=void 0===r.validPassword?s.validPassword:r.validPassword,s.validEmail=void 0===r.validEmail?s.validEmail:r.validEmail,s;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authToken:""},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return n===w?r:e}}),re=Object(d.c)(ne,{currentUser:{username:"",fullname:"",email:"",registration:0,farmElements:{cropSpaces:0,animalSpaces:0,currentCrops:[],currentAnimals:[]},inventory:{currentCash:0,cropBoost:0,animalBoost:0,products:[]}},signIn:{username:"",password:"",msg:""},signUp:{username:"",password:"",email:"",passwordRepeat:"",register:!1,validUser:"",validPassword:"",validEmail:""},auth:{authToken:""}},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(Object(E.jsx)(te.a,{children:Object(E.jsx)(h.a,{store:re,children:Object(E.jsx)($,{})})}),document.getElementById("root")),ee()}},[[35,1,2]]]);
//# sourceMappingURL=main.0529d33b.chunk.js.map